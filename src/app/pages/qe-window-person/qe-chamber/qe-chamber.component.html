<div fxLayoutAlign="center stretch" fxLayout="row wrap">
    <div *ngIf="form" fxFlex="80" fxLayoutAlign="center stretch" fxLayout="row wrap" class="box-body">
        <app-step1 fxFlex="100" [step1]="form.step1"></app-step1>
        <app-step4 fxFlex="100" [step4]="form.step4"></app-step4>
        <app-step2 fxFlex="100" [step2]="form.step2"></app-step2>


        <table fxFlex="100" mat-table [dataSource]="dataSource" multiTemplateDataRows class="mat-elevation-z8" style="margin: 100px 0;">

            <!-- Checkbox Column -->
            <ng-container matColumnDef="select">
                <th mat-header-cell *matHeaderCellDef>
                    <mat-checkbox (change)="$event ? toggleAllRows() : null" [checked]="selection.hasValue() && isAllSelected()" [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
                    </mat-checkbox>
                </th>
                <td mat-cell *matCellDef="let row">
                    <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null" [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)">
                    </mat-checkbox>
                </td>
            </ng-container>

            <ng-container matColumnDef="reqNo">
                <th mat-header-cell *matHeaderCellDef>CONTROL No.</th>
                <td mat-cell *matCellDef="let element;">
                    {{element.step1.controlNo}}
                </td>
            </ng-container>

            <ng-container matColumnDef="userRequest">
                <th mat-header-cell *matHeaderCellDef>USER REQUEST</th>
                <td mat-cell *matCellDef="let element;">
                    {{htmlUserRequest(element)}}
                </td>
            </ng-container>

            <ng-container matColumnDef="requestDate">
                <th mat-header-cell *matHeaderCellDef>REQUEST DATE</th>
                <td mat-cell *matCellDef="let element;">
                    {{element.step1.requestDate |date:'d/M/yyyy'}}
                </td>
            </ng-container>

            <ng-container matColumnDef="sendDate">
                <th mat-header-cell *matHeaderCellDef>SEND SAMPLE DATE</th>
                <td mat-cell *matCellDef="let element;">
                    {{element.step1.sampleSentToQE_withinDate |date:'d/M/yyyy'}}
                </td>
            </ng-container>

            <ng-container matColumnDef="condition">
                <th mat-header-cell *matHeaderCellDef>CONDITION</th>
                <td mat-cell *matCellDef="let element;">
                    {{htmlCondition(element.condition)}}
                </td>
            </ng-container>

            <ng-container matColumnDef="operate">
                <th mat-header-cell *matHeaderCellDef>OPERATE</th>
                <td mat-cell *matCellDef="let element;">
                    {{element.condition.data.operate}}
                </td>
            </ng-container>

            <ng-container matColumnDef="qty">
                <th mat-header-cell *matHeaderCellDef>Qty (pcs.)</th>
                <td mat-cell *matCellDef="let element;">
                    {{element.condition.data.qty}}
                </td>
            </ng-container>

            <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef></th>
                <td mat-cell *matCellDef="let element;">
                    <button mat-raised-button (click)="dialogChamber(element)">Action</button>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selection.toggle(row)">
            </tr>

        </table>
        <button mat-raised-button (click)="createPlaning()">Create Planning</button>


        <h1>Planing</h1>
        <div fxFlex="100" fxLayoutAlign="space-around stretch" fxLayout="row wrap" *ngFor="let item of chamberTable; let i=index">

            <mat-form-field fxFlex="30" *ngIf="item.condition" appearance="legacy">
                <mat-label>Condition Name</mat-label>
                <input matInput [(ngModel)]="item.condition.name" [readonly]="true">
            </mat-form-field>

            <mat-form-field fxFlex="30" *ngIf="item.work" appearance="legacy">
                <mat-label>Qty</mat-label>
                <input matInput [(ngModel)]="item.work.qty" [readonly]="true">
            </mat-form-field>

            <mat-form-field fxFlex="30" appearance="fill">
                <mat-label>startDate</mat-label>
                <input matInput [matDatepicker]="startDate" [(ngModel)]="item.startDate" (ngModelChange)="onStartDate()">
                <mat-hint>MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle matSuffix [for]="startDate"></mat-datepicker-toggle>
                <mat-datepicker touchUi #startDate></mat-datepicker>
            </mat-form-field>

            <mat-form-field fxFlex="30" *ngIf="item.endDate" appearance="legacy">
                <mat-label>endDate</mat-label>
                <input matInput [value]="item.endDate|date:'mm/dd/yyy'" [readonly]="true">
            </mat-form-field>


        </div>
    </div>

</div>